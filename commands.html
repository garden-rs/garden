<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Commands - Garden User Guide</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Garden grows and cultivates Git trees">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Garden</a></li><li class="chapter-item expanded "><a href="glossary.html"><strong aria-hidden="true">2.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="setup-and-usage.html"><strong aria-hidden="true">3.</strong> Setup and Usage</a></li><li class="chapter-item expanded "><a href="commands.html" class="active"><strong aria-hidden="true">4.</strong> Commands</a></li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">5.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="tree-queries.html"><strong aria-hidden="true">6.</strong> Tree Queries</a></li><li class="chapter-item expanded "><a href="examples.html"><strong aria-hidden="true">7.</strong> Examples</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Garden User Guide</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/davvid/garden/tree/main/doc" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        
                        <a href="https://github.com/davvid/garden/edit/main/doc/src/commands.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="commands"><a class="header" href="#commands">Commands</a></h1>
<p>Garden has a handful of built-in commands and provides a flexible way to
extend it with user-defined commands. User-defined commands are one of the
most useful Garden features.</p>
<h2 id="command-line-conventions"><a class="header" href="#command-line-conventions">Command-Line Conventions</a></h2>
<p>All builtin garden commands have this basic syntax:</p>
<pre><code>garden [options] &lt;command&gt; [command-options] [command-arguments]*
</code></pre>
<p>The following options are specified before <code>&lt;command&gt;</code>, and are
global to all <code>garden</code> commands.</p>
<pre><code>-c | --config &lt;path&gt;
</code></pre>
<p>Specify a garden config file to use instead of searching for <code>garden.yaml</code>.
The path can either be the path to an actual config file, or it can be
the basename of a file in the configuration search path.</p>
<pre><code>-v | --verbose
</code></pre>
<p>Enable verbose debugging output.</p>
<pre><code>-s | --set  name=value
</code></pre>
<p>Override a configured variable by passing a <code>name=value</code> string to
the <code>--set</code> option.  The variable named <code>name</code> will be updated with the
garden expression <code>value</code>.  Multiple variables can be set by specifying the
flag multiple times.</p>
<h2 id="garden-add"><a class="header" href="#garden-add">garden add</a></h2>
<pre><code>garden add &lt;path&gt;

# example
garden add src/repo
</code></pre>
<p>Add an existing Git tree at <code>&lt;path&gt;</code> to <code>garden.yaml</code>.</p>
<h2 id="garden-cmd"><a class="header" href="#garden-cmd">garden cmd</a></h2>
<pre><code>garden cmd &lt;query&gt; &lt;command&gt;... [-- &lt;arguments&gt;..]

# example
garden cmd cola build test -- V=1
</code></pre>
<p>Run commands over the trees matched by <code>&lt;query&gt;</code>.</p>
<p><code>garden cmd</code> and <code>garden &lt;command&gt;</code> interact with custom commands that are
configured in the &quot;commands&quot; section for templates, trees, gardens,
and the global top-level scope.</p>
<p>Custom commands can be defined at either the tree or garden level.
Commands defined at the garden level extend commands defined on a tree.</p>
<p>Commands are executed in a shell, so shell expressions can be used in commands.
Each command runs under <code>[&quot;sh&quot;, &quot;-c&quot;, &quot;&lt;command&gt;&quot;]</code> with the resolved
environment from the corresponding garden, group, or tree.</p>
<p>Optional command-line <code>&lt;arguments&gt;</code> specified after a double-dash (<code>--</code>)
end-of-options marker are forwarded to each command.</p>
<p><code>&quot;$0&quot;</code> in a custom command points to the current garden executable and can be
used to rerun garden from within a garden command.</p>
<p>Optional arguments are available to command strings by using the traditional
<code>&quot;$@&quot;</code> shell expression syntax.  When optional arguments are present <code>&quot;$1&quot;</code>,
<code>&quot;$2&quot;</code>, and subsequent variables will be set according to each argument.</p>
<h3 id="custom-commands"><a class="header" href="#custom-commands">Custom Commands</a></h3>
<pre><code>garden &lt;command&gt; &lt;query&gt;... [-- &lt;arguments&gt;...]

# example
garden status @git-cola .
garden build cola -- V=1
</code></pre>
<p>When no builtin command exists by the specified name then garden will
use custom commands defined in a &quot;commands&quot; block at the corresponding
garden or tree scope.</p>
<p>This is complementary to <code>garden cmd &lt;query&gt; &lt;command&gt;...</code>.
That form can run multiple commands; this form operates over multiple queries.</p>
<h2 id="garden-exec"><a class="header" href="#garden-exec">garden exec</a></h2>
<pre><code>garden exec &lt;query&gt; &lt;command&gt; [&lt;arguments&gt;]*

# example
garden exec cola git status -s
</code></pre>
<p>Execute arbitrary commands on all of the trees matched by <code>&lt;query&gt;</code>.</p>
<h2 id="garden-eval"><a class="header" href="#garden-eval">garden eval</a></h2>
<pre><code>garden eval &lt;expression&gt; [&lt;tree&gt;] [&lt;garden&gt;]

# example
garden eval '${GARDEN_ROOT}'
garden eval '${TREE_PATH}' cola
</code></pre>
<p>Evaluate a garden expression in the specified tree context.
If no tree is given then the variable scope includes the top-level variables
block only.</p>
<p>When a tree is given then its variables are considered as well.
When a garden is specified then the garden's variables are also available for
evaluation.</p>
<h2 id="garden-init"><a class="header" href="#garden-init">garden init</a></h2>
<pre><code>garden init [options]

# create a local garden config rooted at the current directory
garden init --root '${GARDEN_CONFIG_DIR}'

# create a global garden config rooted at ~/src
garden init --global --root '~/src'
</code></pre>
<p>Create a new empty <code>garden.yaml</code> in the current directory, or in the
user's global configuration directory when <code>--global</code> is specified.
See <code>garden help init</code> for more details.</p>
<h2 id="garden-grow"><a class="header" href="#garden-grow">garden grow</a></h2>
<pre><code>garden grow &lt;query&gt;

# example
garden grow cola
</code></pre>
<p>Update or create the tree(s) referenced by the <code>&lt;query&gt;</code>.</p>
<p>It is safe to re-run the <code>grow</code> command.  Existing trees will have their git
configuration updated to match the configured remotes.  Missing repositories
are created by cloning the configured tree url.</p>
<h2 id="garden-shell"><a class="header" href="#garden-shell">garden shell</a></h2>
<pre><code>garden shell &lt;query&gt; [&lt;tree&gt;]

# example
garden shell cola
</code></pre>
<p>Launch a shell inside the environment formed by the tree query.
The optional tree argument specifies which tree to chdir into.</p>
<p>If the resolved tree query contains a tree whose name exactly matches the
query string then that tree's directory will be used when opening the shell.
The optional tree argument is not needed for the common case where a garden
and tree share a name -- garden will chdir into that same-named tree when
creating the shell.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="setup-and-usage.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="configuration.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="setup-and-usage.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="configuration.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>
        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        
        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
